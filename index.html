<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Tiled API!</p>

<p>You can use our API to enable single sign on (SSO) into our app.</p>

<p>More to come&hellip;</p>

          <h1 id="app-sso">App SSO</h1>

<h2 id="http-based-authentication">HTTP based authentication</h2>

<blockquote>
<p>Example SSO universal link</p>
</blockquote>
<pre class="highlight plaintext"><code>https://app.tiled.co/app/sso/?
  url=https%3A%2F%2Fmy.auth.provider&amp;
  apiToken=1234abcd5678efgh&amp;
  usernameLabel=email&amp;
  usernameKey=user.email&amp;
  passwordKey=user.password&amp;
  emailPath=user.profile.login&amp;
  namePath=user.profile.firstName&amp;
  namePath=user.profile.lastName&amp;
  storeCredentials=true
</code></pre>
<blockquote>
<p>For this example, and the username of <code class="prettyprint">bob@example.com</code> and password of <code class="prettyprint">fancypants</code>, the following will POST to <code class="prettyprint">https://my.auth.provider</code>:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fancypants"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The default POST body if <code class="prettyprint">usernameKey</code> and <code class="prettyprint">passwordKey</code> were not set would look like:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fancypants"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>And we are expecting a JSON result of the form:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnson"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You can see <code class="prettyprint">emailPath</code> and the two <code class="prettyprint">namePath</code> parameters will allow the app to correctly parse the result and extract <code class="prettyprint">bob@example.com</code> as the email address to use for finding the correct tiled user in our system.
The name parsed from this results would be <code class="prettyprint">Bob Johnson</code>.</p>
</blockquote>

<p>Use this method to authenticate with third party identity providers.</p>

<h3 id="universal-link">Universal Link</h3>

<p><code class="prettyprint">https://app.tiled.co/app/sso/</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>true</td>
<td>none</td>
<td>The url for your identity provider&rsquo;s authorization endpoint.</td>
</tr>
<tr>
<td>apiToken</td>
<td>true</td>
<td>none</td>
<td>Your Tiled API token - generated in <strong>account settings</strong> on <a href="https://app.tiled.co" target="_blank">https://app.tiled.co</a>.</td>
</tr>
<tr>
<td>emailPath</td>
<td>true</td>
<td>none</td>
<td>The <strong>path</strong> to the user&rsquo;s email address in the response body.</td>
</tr>
<tr>
<td>namePath</td>
<td>true</td>
<td>none</td>
<td>The <strong>path</strong> to the user&rsquo;s name in the response body. If the user name is in multiple parts, they can be specified with multiple instances of <code class="prettyprint">namePath</code> parameters and the results will be joined with a space at runtime.</td>
</tr>
<tr>
<td>expirationPath</td>
<td>false</td>
<td>null</td>
<td>The <strong>path</strong> to an optional session expiration date in the response body.</td>
</tr>
<tr>
<td>method</td>
<td>false</td>
<td>POST</td>
<td>HTTP method to use when accessing <code class="prettyprint">url</code>.</td>
</tr>
<tr>
<td>usernameLabel</td>
<td>false</td>
<td>username</td>
<td>The placeholder text for the username form input in the app.</td>
</tr>
<tr>
<td>passwordLabel</td>
<td>false</td>
<td>password</td>
<td>The placeholder text for the password form input in the app.</td>
</tr>
<tr>
<td>usernameKey</td>
<td>false</td>
<td>username</td>
<td>The <strong>path</strong> in the request body to set the username in the request sent to <code class="prettyprint">url</code>.</td>
</tr>
<tr>
<td>passwordKey</td>
<td>false</td>
<td>password</td>
<td>The <strong>path</strong> in the request body to set the password in the request sent to <code class="prettyprint">url</code>.</td>
</tr>
<tr>
<td>ttl</td>
<td>false</td>
<td>null</td>
<td>How long the session should last (in milliseconds or a <a href="https://www.npmjs.com/package/ms" target="_blank">string representation</a> e.g. &ldquo;24h&rdquo;, &ldquo;30m&rdquo;, &ldquo;12345s&rdquo;, &ldquo;4d&rdquo;). Note, if <code class="prettyprint">expirationPath</code> is set and a valid date is found using it, <code class="prettyprint">ttl</code> will not be used.</td>
</tr>
<tr>
<td>formTitle</td>
<td>false</td>
<td>Sign in</td>
<td>The title displayed at the top of the sign in form in the app.</td>
</tr>
<tr>
<td>formLogo</td>
<td>false</td>
<td>null</td>
<td>A URL to an image to display at the top of the sign in form in the app. The logo is letterboxed in a rectangle 306x80. Note - if set, <code class="prettyprint">formTitle</code> will not be used.</td>
</tr>
<tr>
<td>primaryColor</td>
<td>false</td>
<td>#eb2227</td>
<td>The background color of the sign in button and the text color of the form inputs. Note, the sign in button text color is white.</td>
</tr>
<tr>
<td>storeCredentials</td>
<td>false</td>
<td>false</td>
<td>If this is true, the user&rsquo;s credentials are stored in the device Keychain and when a session expires the user can authenticate with TouchID or 4-digit PIN to get a new session.</td>
</tr>
</tbody></table>

<aside class="warning">
Remember — make sure all your url parameters are encoded!
</aside>

<h2 id="web-based-authentication">Web based authentication</h2>

<blockquote>
<p>Example SSO universal link</p>
</blockquote>
<pre class="highlight plaintext"><code>https://app.tiled.co/app/sso/?
  idp=fancypantsapp&amp;
  ttl=24h
</code></pre>
<p>Use this method to authenticate with third party identity providers using a web-based OAuth, OpenID, SAML or other flow.</p>

<aside class="notice">
This form of SSO requires custom configuration by Tiled engineers. Contact us if you are interested in this form of SSO.
</aside>

<h3 id="universal-link">Universal Link</h3>

<p><code class="prettyprint">https://app.tiled.co/app/sso/</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>none</td>
<td>A unique ID provided by Tiled</td>
</tr>
<tr>
<td>ttl</td>
<td>false</td>
<td>null</td>
<td>How long the session should last (in milliseconds or a <a href="https://www.npmjs.com/package/ms" target="_blank">string representation</a> e.g. &ldquo;24h&rdquo;, &ldquo;30m&rdquo;, &ldquo;12345s&rdquo;, &ldquo;4d&rdquo;). Note - if <code class="prettyprint">ttl</code> is not set, the session will not expire unless manually revoked on the Tiled website.</td>
</tr>
</tbody></table>

<aside class="warning">
Remember — make sure all your url parameters are encoded!
</aside>

<h2 id="using-custom-auth-tokens">Using custom auth tokens</h2>

<blockquote>
<p>Example SSO universal link</p>
</blockquote>
<pre class="highlight plaintext"><code>https://app.tiled.co/app/auth/?
  idp=fancypantsapp&amp;
  token=1234abcd5678efgh
  ttl=24h
</code></pre>
<p>Use this method if you want to generate and sign a secure token and send it directly into the app to authenticate the user.</p>

<aside class="notice">
This form of SSO requires custom configuration by Tiled engineers. Contact us if you are interested in this form of SSO.
</aside>

<h3 id="universal-link">Universal Link</h3>

<p><code class="prettyprint">https://app.tiled.co/app/sso/</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>none</td>
<td>A unique ID provided by Tiled</td>
</tr>
<tr>
<td>token</td>
<td>true</td>
<td>none</td>
<td>A signed token containing the user&rsquo;s email address for lookup</td>
</tr>
<tr>
<td>ttl</td>
<td>false</td>
<td>null</td>
<td>How long the session should last (in milliseconds or a <a href="https://www.npmjs.com/package/ms" target="_blank">string representation</a> e.g. &ldquo;24h&rdquo;, &ldquo;30m&rdquo;, &ldquo;12345s&rdquo;, &ldquo;4d&rdquo;). Note - if <code class="prettyprint">ttl</code> is not set, the session will not expire unless manually revoked on the Tiled website.</td>
</tr>
</tbody></table>

<aside class="warning">
Remember — make sure all your url parameters are encoded!
</aside>

          <h1 id="custom-tiles-with-remote-data">Custom Tiles with Remote Data</h1>

<h2 id="overview">Overview</h2>

<p>Custom tiles can be configured to fetch remote data for rendering. This documentation outlines the configuration values you can use and how they work.</p>

<h2 id="configuring-remote-url">Configuring remote URL</h2>

<blockquote>
<p>Example URL <strong>without</strong> query string parameters</p>
</blockquote>
<pre class="highlight plaintext"><code>// ENTERED URL
https://www.example.com/user/data
</code></pre><pre class="highlight plaintext"><code>// REQUEST URL
https://www.example.com/user/data?
  userId=am9obmRvZUBleGFtcGxlLmNvbQ%3D%3D
</code></pre>
<p>You provide a URL where the data needed for the custom tile can be accessed. The URL will be access with an <code class="prettyprint">HTTP GET</code> request with the current user&rsquo;s ID appended as the query string parameter <code class="prettyprint">userId</code>.</p>

<p>The user ID is their <code class="prettyprint">email address</code> that has been <code class="prettyprint">base64</code> encoded.</p>

<aside class="notice">
You can add other query string parameters in the URL body as you wish. If you provide your own parameters, `userId` will be appended to the end of the url.
</aside>

<h2 id="response">Response</h2>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My custom label"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some great body copy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#0080ff"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The URL you provide should return a valid <code class="prettyprint">JSON object</code> with the <code class="prettyprint">Content-Type</code> header set to <code class="prettyprint">application/json</code></p>

<p>The data you return will be used to override the default values (configurable in the app editor) for the custom tile.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
